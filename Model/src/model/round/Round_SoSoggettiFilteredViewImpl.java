package model.round;

import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;

import oracle.jbo.Row;
import oracle.jbo.RowSetIterator;
import oracle.jbo.ViewLink;
import oracle.jbo.ViewObject;
import oracle.jbo.server.ViewAttributeDefImpl;
import oracle.jbo.server.ViewObjectImpl;
import oracle.jdbc.OracleTypes;

//  ---------------------------------------------------------------------
//  ---    File generated by Oracle ADF Business Components Design Time.
//  ---    Custom code may be added to this class.
//  ---    Warning: Do not modify method signatures of generated methods.
//  ---------------------------------------------------------------------

public class Round_SoSoggettiFilteredViewImpl extends ViewObjectImpl implements model.round.common.Round_SoSoggettiFilteredView 
{
  /**
   * 
   *  This is the default constructor (do not remove)
   */
  public Round_SoSoggettiFilteredViewImpl()
  {
  }
  
  public String getInClause() {

        String s = this.getQuery();
        //sostituisco i bound attributes
        Object[] params = this.getWhereClauseParams();
        int i = 0;
        for (i = 0; i < params.length; i++) {
            Object[] param = (Object[]) params[i];
            String toReplace = ":" + String.valueOf(i + 1);
            String replaceWith = "'" + param[1] + "'";

            s = s.replaceFirst(toReplace, replaceWith);

        }

        //SE ï¿½ UN DETAIL RECUPERO I DATI DAL MASTER
        String a = this.getAssociationClause(0);
        if (a != null) {
            ViewLink[] vl = this.getViewLinks();
            ViewObject source = (ViewObject) vl[0].getSource();
            Row related = source.getCurrentRow();
            if (related == null)
                s = s.replaceAll(":" + (i + 1), "null");
            else {
                s = s.replaceAll(":" + (i + 1), "'" + related.getAttribute("Idtpinvito") + "'");
                s = s.replaceAll(":Bind_Idtpinvito", "'" + related.getAttribute("Idtpinvito") + "'");
            }

        }

        return "SELECT DISTINCT CODTS,ULSS FROM (" + s + ")";

    }
}