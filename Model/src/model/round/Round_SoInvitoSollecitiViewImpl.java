package model.round;
import oracle.jbo.Row;
import oracle.jbo.ViewLink;
import oracle.jbo.ViewObject;
import oracle.jbo.server.ViewObjectImpl;

//  ---------------------------------------------------------------------
//  ---    File generated by Oracle ADF Business Components Design Time.
//  ---    Custom code may be added to this class.
//  ---    Warning: Do not modify method signatures of generated methods.
//  ---------------------------------------------------------------------

public class Round_SoInvitoSollecitiViewImpl extends ViewObjectImpl implements model.round.common.Round_SoInvitoSollecitiView 
{
  /**
   * 
   *  This is the default constructor (do not remove)
   */
  public Round_SoInvitoSollecitiViewImpl()
  {
  }
  
   public String getInClause()
  {
    /*  RowSetIterator iter=ViewHelper.getRowSetIterator(this,"tmp_iter");
      String s="";
      Row r;
      while((r=iter.next()) !=null)
      {
        s+=",'"+r.getAttribute("Codts")+"'";
        
      }
      iter.closeRowSetIterator();
      if(s.startsWith(","))
        s=s.substring(1);

      return s;*/
      
      String s=this.getQuery();
      String a=this.getAssociationClause(0);
     // System.out.println(a);
     
      if(a!=null)
      {
        //(:1 = IDTPINV_SOLL) AND (NVL(:2,1) = NVL(TEST_PROPOSTO,1))
        a = "\\(:1 = IDTPINV_SOLL\\) AND \\(NVL\\(:2,1\\) = NVL\\(TEST_PROPOSTO,1\\)\\)";  //replace caratteri speciale regex
        ViewLink[] vl=this.getViewLinks();
        ViewObject source=(ViewObject)vl[0].getSource();
        Row related=source.getCurrentRow();
        if(related==null)
          s=s.replaceAll(a," IDTPINV_SOLL is null ");
        else
         s=s.replaceAll(a,"IDTPINV_SOLL='"+related.getAttribute("Idtpinvito")+"'");
      }
      
    //  System.out.println(s);
      return "SELECT DISTINCT CODTS, ULSS FROM ("+s+")";
   
  }
}